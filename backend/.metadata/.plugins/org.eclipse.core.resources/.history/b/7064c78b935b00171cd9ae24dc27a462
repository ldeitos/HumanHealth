package br.com.humanhealth.persistence.impl;

import javax.annotation.PostConstruct;
import javax.ejb.Singleton;
import javax.ejb.Startup;
import javax.enterprise.context.ApplicationScoped;

import com.googlecode.objectify.ObjectifyService;

import br.com.humanhealth.entity.mapper.SystemEntities;
import lombok.extern.log4j.Log4j;

@Log4j
@ApplicationScoped
public class GCloudStoreLoader {

    
    public void loadEntities(@Observes @Initialized( ApplicationScoped.class ) Object init){
	log.info("Loading entities to ObjectifyService.");
	
	for(Class<?> entityClass : SystemEntities.ENTITIES){
	    log.debug(String.format("Loading [%s] class", entityClass.getName()));
	    ObjectifyService.register(entityClass);
	}
    }

}
